"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[340],{7179:function(e,s,a){a.d(s,{DashboardLayout:function(){return Q}});var t=a(7437),r=a(2265),n=a(605),i=a(2869),l=a(9202),c=a(9397),o=a(6595),d=a(8930),m=a(2369),u=a(6215),x=a(8728),p=a(7692),h=a(5186),f=a(6815),g=a(2673),j=a(875),N=a(2135),b=a(401),y=a(4508);let v=g.fC;g.ZA;let w=g.B4,C=r.forwardRef(({className:e,children:s,...a},r)=>(0,t.jsxs)(g.xz,{ref:r,className:(0,y.cn)("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",e),...a,children:[s,(0,t.jsx)(g.JO,{asChild:!0,children:(0,t.jsx)(j.Z,{className:"h-4 w-4 opacity-50"})})]}));C.displayName=g.xz.displayName;let k=r.forwardRef(({className:e,...s},a)=>(0,t.jsx)(g.u_,{ref:a,className:(0,y.cn)("flex cursor-default items-center justify-center py-1",e),...s,children:(0,t.jsx)(N.Z,{className:"h-4 w-4"})}));k.displayName=g.u_.displayName;let z=r.forwardRef(({className:e,...s},a)=>(0,t.jsx)(g.$G,{ref:a,className:(0,y.cn)("flex cursor-default items-center justify-center py-1",e),...s,children:(0,t.jsx)(j.Z,{className:"h-4 w-4"})}));z.displayName=g.$G.displayName;let D=r.forwardRef(({className:e,children:s,position:a="popper",...r},n)=>(0,t.jsx)(g.h_,{children:(0,t.jsxs)(g.VY,{ref:n,className:(0,y.cn)("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===a&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:a,...r,children:[(0,t.jsx)(k,{}),(0,t.jsx)(g.l_,{className:(0,y.cn)("p-1","popper"===a&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:s}),(0,t.jsx)(z,{})]})}));D.displayName=g.VY.displayName,r.forwardRef(({className:e,...s},a)=>(0,t.jsx)(g.__,{ref:a,className:(0,y.cn)("py-1.5 pl-8 pr-2 text-sm font-semibold",e),...s})).displayName=g.__.displayName;let Z=r.forwardRef(({className:e,children:s,...a},r)=>(0,t.jsxs)(g.ck,{ref:r,className:(0,y.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...a,children:[(0,t.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,t.jsx)(g.wU,{children:(0,t.jsx)(b.Z,{className:"h-4 w-4"})})}),(0,t.jsx)(g.eT,{children:s})]}));Z.displayName=g.ck.displayName,r.forwardRef(({className:e,...s},a)=>(0,t.jsx)(g.Z0,{ref:a,className:(0,y.cn)("-mx-1 my-1 h-px bg-muted",e),...s})).displayName=g.Z0.displayName;var A=a(6110),S=a(4438),F=a(1817);let _=["Social Media","Productivity","Communication","Entertainment","News","Work","Shopping","Education","Finance","Health","Other"],E=[{name:"Twitter",url:"https://twitter.com",icon:"\uD83D\uDC26",category:"Social Media"},{name:"Instagram",url:"https://instagram.com",icon:"\uD83D\uDCF7",category:"Social Media"},{name:"LinkedIn",url:"https://linkedin.com",icon:"\uD83D\uDCBC",category:"Social Media"},{name:"Gmail",url:"https://mail.google.com",icon:"\uD83D\uDCE7",category:"Communication"},{name:"Slack",url:"https://slack.com",icon:"\uD83D\uDCAC",category:"Communication"},{name:"Notion",url:"https://notion.so",icon:"\uD83D\uDCDD",category:"Productivity"},{name:"Trello",url:"https://trello.com",icon:"\uD83D\uDCCB",category:"Productivity"},{name:"YouTube",url:"https://youtube.com",icon:"\uD83C\uDFA5",category:"Entertainment"},{name:"Netflix",url:"https://netflix.com",icon:"\uD83C\uDFAC",category:"Entertainment"},{name:"GitHub",url:"https://github.com",icon:"⚡",category:"Work"},{name:"WhatsApp Web",url:"https://web.whatsapp.com",icon:"\uD83D\uDC9A",category:"Communication"},{name:"Discord",url:"https://discord.com",icon:"\uD83C\uDFAE",category:"Communication"}];function R({open:e,onOpenChange:s,onAppAdded:a}){let[n,l]=(0,r.useState)(!1),[c,o]=(0,r.useState)({name:"",url:"",icon:"",category:"",description:""}),d=async e=>{e.preventDefault(),l(!0);try{let e=c.url.trim();!e||e.startsWith("http://")||e.startsWith("https://")||(e="https://"+e);let s=await fetch("/api/apps",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...c,url:e})});if(!s.ok){let e=await s.json();throw Error(e.error||"Failed to add app")}let t=await s.json();a(t),S.Am.success("App added successfully!"),o({name:"",url:"",icon:"",category:"",description:""})}catch(e){S.Am.error(e instanceof Error?e.message:"Failed to add app")}finally{l(!1)}},m=e=>{o({name:e.name,url:e.url,icon:e.icon,category:e.category,description:`${e.name} - ${e.category}`})};return(0,t.jsx)(A.Vq,{open:e,onOpenChange:s,children:(0,t.jsxs)(A.cZ,{className:"sm:max-w-[500px]",children:[(0,t.jsxs)(A.fK,{children:[(0,t.jsx)(A.$N,{children:"Add New App"}),(0,t.jsx)(A.Be,{children:"Add a web application to your dashboard. You can embed any website that supports iframe embedding."})]}),(0,t.jsxs)("form",{onSubmit:d,className:"space-y-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(f._,{htmlFor:"name",children:"App Name *"}),(0,t.jsx)(h.I,{id:"name",placeholder:"Enter app name",value:c.name,onChange:e=>o({...c,name:e.target.value}),required:!0})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(f._,{htmlFor:"url",children:"Website URL *"}),(0,t.jsx)(h.I,{id:"url",type:"url",placeholder:"https://example.com",value:c.url,onChange:e=>o({...c,url:e.target.value}),required:!0})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(f._,{htmlFor:"icon",children:"Icon (Emoji)"}),(0,t.jsx)(h.I,{id:"icon",placeholder:"\uD83C\uDF10",value:c.icon,onChange:e=>o({...c,icon:e.target.value}),maxLength:2})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(f._,{htmlFor:"category",children:"Category"}),(0,t.jsxs)(v,{value:c.category,onValueChange:e=>o({...c,category:e}),children:[(0,t.jsx)(C,{children:(0,t.jsx)(w,{placeholder:"Select category"})}),(0,t.jsx)(D,{children:_.map(e=>(0,t.jsx)(Z,{value:e,children:e},e))})]})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(f._,{htmlFor:"description",children:"Description"}),(0,t.jsx)(h.I,{id:"description",placeholder:"Brief description of the app",value:c.description,onChange:e=>o({...c,description:e.target.value})})]}),(0,t.jsxs)(A.cN,{children:[(0,t.jsx)(i.z,{type:"button",variant:"outline",onClick:()=>s(!1),children:"Cancel"}),(0,t.jsxs)(i.z,{type:"submit",disabled:n,children:[n&&(0,t.jsx)(F.Z,{className:"mr-2 h-4 w-4 animate-spin"}),"Add App"]})]})]}),(0,t.jsxs)("div",{className:"mt-6 pt-4 border-t border-border",children:[(0,t.jsx)(f._,{className:"text-sm font-medium",children:"Quick Add Popular Apps"}),(0,t.jsx)("div",{className:"grid grid-cols-3 gap-2 mt-2",children:E.slice(0,6).map(e=>(0,t.jsxs)(i.z,{variant:"outline",size:"sm",className:"h-auto p-2 flex flex-col items-center space-y-1",onClick:()=>m(e),type:"button",children:[(0,t.jsx)("span",{className:"text-lg",children:e.icon}),(0,t.jsx)("span",{className:"text-xs",children:e.name})]},e.name))})]})]})})}function I({apps:e,selectedApps:s,onAppSelect:a,onAppsChange:h}){let{data:f}=(0,n.useSession)(),[g,j]=(0,r.useState)(!1),N=async()=>{await (0,n.signOut)({callbackUrl:"/auth/signin"})},b=async s=>{try{(await fetch(`/api/apps/${s}`,{method:"DELETE"})).ok?(h(e.filter(e=>e.id!==s)),S.Am.success("App deleted successfully")):S.Am.error("Failed to delete app")}catch(e){S.Am.error("Failed to delete app")}},v=async s=>{try{let a=await fetch(`/api/apps/${s.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({...s,isFavorite:!s.isFavorite})});if(a.ok){let t=await a.json();h(e.map(e=>e.id===s.id?t:e))}}catch(e){S.Am.error("Failed to update favorite")}};return(0,t.jsxs)("div",{className:"w-64 bg-card border-r border-border flex flex-col h-full",children:[(0,t.jsxs)("div",{className:"p-4 border-b border-border",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-3 mb-4",children:[(0,t.jsx)("div",{className:"w-8 h-8 bg-primary rounded-lg flex items-center justify-center",children:(0,t.jsx)(l.Z,{className:"w-5 h-5 text-primary-foreground"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"font-semibold text-sm",children:"Dashboard"}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground",children:"Multi-App Hub"})]})]}),(0,t.jsxs)(i.z,{onClick:()=>j(!0),className:"w-full",size:"sm",children:[(0,t.jsx)(c.Z,{className:"w-4 h-4 mr-2"}),"Add App"]})]}),(0,t.jsx)("div",{className:"flex-1 overflow-y-auto custom-scrollbar",children:(0,t.jsx)("div",{className:"p-2 space-y-1",children:0===e.length?(0,t.jsxs)("div",{className:"text-center py-8 text-muted-foreground",children:[(0,t.jsx)(l.Z,{className:"w-8 h-8 mx-auto mb-2 opacity-50"}),(0,t.jsx)("p",{className:"text-sm",children:"No apps added yet"}),(0,t.jsx)("p",{className:"text-xs",children:'Click "Add App" to get started'})]}):e.map(e=>(0,t.jsxs)("div",{className:(0,y.cn)("group relative flex items-center space-x-3 p-2 rounded-md cursor-pointer transition-colors",s.some(s=>s.id===e.id)?"bg-primary/10 text-primary":"hover:bg-muted text-muted-foreground"),onClick:()=>a(e),children:[(0,t.jsx)("div",{className:"w-8 h-8 bg-primary/10 rounded-md flex items-center justify-center flex-shrink-0",children:e.icon?(0,t.jsx)("span",{className:"text-lg",children:e.icon}):(0,t.jsx)(l.Z,{className:"w-4 h-4"})}),(0,t.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,t.jsx)("p",{className:"text-sm font-medium truncate",children:e.name}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground truncate",children:e.category||"General"})]}),(0,t.jsxs)("div",{className:"flex items-center space-x-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[(0,t.jsx)(i.z,{variant:"ghost",size:"icon",className:"w-6 h-6",onClick:s=>{s.stopPropagation(),v(e)},children:(0,t.jsx)(o.Z,{className:(0,y.cn)("w-3 h-3",e.isFavorite?"fill-yellow-400 text-yellow-400":"")})}),(0,t.jsx)(i.z,{variant:"ghost",size:"icon",className:"w-6 h-6 text-destructive hover:text-destructive",onClick:s=>{s.stopPropagation(),b(e.id)},children:(0,t.jsx)(d.Z,{className:"w-3 h-3"})})]})]},e.id))})}),(0,t.jsxs)("div",{className:"p-4 border-t border-border space-y-2",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-3 p-2 rounded-md bg-muted/50",children:[(0,t.jsx)("div",{className:"w-8 h-8 bg-primary rounded-full flex items-center justify-center",children:(0,t.jsx)(m.Z,{className:"w-4 h-4 text-primary-foreground"})}),(0,t.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,t.jsx)("p",{className:"text-sm font-medium truncate",children:f?.user?.name}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground truncate",children:f?.user?.email})]})]}),(0,t.jsxs)("div",{className:"flex space-x-1",children:[(0,t.jsxs)(i.z,{variant:"ghost",size:"sm",className:"flex-1",children:[(0,t.jsx)(u.Z,{className:"w-4 h-4 mr-2"}),"Analytics"]}),(0,t.jsxs)(i.z,{variant:"ghost",size:"sm",className:"flex-1",children:[(0,t.jsx)(x.Z,{className:"w-4 h-4 mr-2"}),"Settings"]})]}),(0,t.jsxs)(i.z,{variant:"outline",size:"sm",className:"w-full",onClick:N,children:[(0,t.jsx)(p.Z,{className:"w-4 h-4 mr-2"}),"Sign Out"]})]}),(0,t.jsx)(R,{open:g,onOpenChange:j,onAppAdded:s=>{h([...e,s]),j(!1)}})]})}var T=a(9322),$=a(6362),V=a(7168),L=a(2660),O=a(6858),P=a(4938),U=a(36);function W({app:e}){let[s,a]=(0,r.useState)(!0),[n,l]=(0,r.useState)(!1),[c,o]=(0,r.useState)(!1),[d,m]=(0,r.useState)(!1),u=(0,r.useRef)(null);(0,r.useEffect)(()=>{a(!0),l(!1)},[e.url]);let x=()=>{u.current&&(u.current.src=u.current.src,a(!0),l(!1))},p=()=>{window.open(e.url,"_blank","noopener,noreferrer")};return n?(0,t.jsxs)("div",{className:"bg-card border border-border rounded-lg shadow-sm flex flex-col h-full",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between p-3 border-b border-border bg-muted/30",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)("div",{className:"w-6 h-6 bg-primary/10 rounded flex items-center justify-center",children:e.icon?(0,t.jsx)("span",{className:"text-sm",children:e.icon}):(0,t.jsx)(T.Z,{className:"w-3 h-3"})}),(0,t.jsx)("span",{className:"text-sm font-medium truncate",children:e.name})]}),(0,t.jsx)(i.z,{variant:"ghost",size:"sm",onClick:p,children:(0,t.jsx)($.Z,{className:"w-4 h-4"})})]}),(0,t.jsx)("div",{className:"flex-1 flex items-center justify-center p-8",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)(T.Z,{className:"w-12 h-12 mx-auto mb-4 text-muted-foreground"}),(0,t.jsx)("h3",{className:"text-lg font-medium mb-2",children:"Cannot load this app"}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground mb-4",children:"This website cannot be embedded due to security restrictions."}),(0,t.jsxs)("div",{className:"space-x-2",children:[(0,t.jsxs)(i.z,{onClick:x,variant:"outline",size:"sm",children:[(0,t.jsx)(V.Z,{className:"w-4 h-4 mr-2"}),"Try Again"]}),(0,t.jsxs)(i.z,{onClick:p,size:"sm",children:[(0,t.jsx)($.Z,{className:"w-4 h-4 mr-2"}),"Open in New Tab"]})]})]})})]}):(0,t.jsxs)("div",{className:"bg-card border border-border rounded-lg shadow-sm flex flex-col h-full",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between p-2 border-b border-border bg-muted/30",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)("div",{className:"w-6 h-6 bg-primary/10 rounded flex items-center justify-center",children:e.icon?(0,t.jsx)("span",{className:"text-sm",children:e.icon}):(0,t.jsx)("div",{className:"w-2 h-2 bg-primary rounded-full"})}),(0,t.jsx)("span",{className:"text-sm font-medium truncate max-w-[150px]",children:e.name})]}),(0,t.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,t.jsx)(i.z,{variant:"ghost",size:"sm",onClick:()=>{if(u.current)try{u.current.contentWindow?.history.back()}catch(e){console.warn("Cannot navigate: cross-origin restrictions")}},disabled:!c,className:"h-7 w-7 p-0",children:(0,t.jsx)(L.Z,{className:"w-3 h-3"})}),(0,t.jsx)(i.z,{variant:"ghost",size:"sm",onClick:()=>{if(u.current)try{u.current.contentWindow?.history.forward()}catch(e){console.warn("Cannot navigate: cross-origin restrictions")}},disabled:!d,className:"h-7 w-7 p-0",children:(0,t.jsx)(O.Z,{className:"w-3 h-3"})}),(0,t.jsx)(i.z,{variant:"ghost",size:"sm",onClick:x,className:"h-7 w-7 p-0",children:(0,t.jsx)(V.Z,{className:"w-3 h-3"})}),(0,t.jsx)(i.z,{variant:"ghost",size:"sm",onClick:()=>{u.current&&(u.current.src=e.url,a(!0),l(!1))},className:"h-7 w-7 p-0",children:(0,t.jsx)(P.Z,{className:"w-3 h-3"})}),(0,t.jsx)(i.z,{variant:"ghost",size:"sm",onClick:p,className:"h-7 w-7 p-0",children:(0,t.jsx)($.Z,{className:"w-3 h-3"})})]})]}),(0,t.jsxs)("div",{className:"flex-1 relative",children:[s&&(0,t.jsx)("div",{className:"absolute inset-0 flex items-center justify-center bg-muted/50 z-10",children:(0,t.jsxs)("div",{className:"flex items-center space-x-2 text-muted-foreground",children:[(0,t.jsx)(F.Z,{className:"w-4 h-4 animate-spin"}),(0,t.jsxs)("span",{className:"text-sm",children:["Loading ",e.name,"..."]})]})}),(0,t.jsx)(U.g,{src:e.url,title:e.name,embedMethod:"direct",fallbackUrl:e.url,proxyAvailable:!0,className:"dashboard-iframe",onLoad:()=>{a(!1),l(!1)},onError:()=>{a(!1),l(!0)}})]})]})}function M({selectedApps:e,layout:s}){if(0===e.length)return(0,t.jsx)("div",{className:"flex-1 flex items-center justify-center bg-muted/20",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)(l.Z,{className:"w-16 h-16 mx-auto mb-4 text-muted-foreground/50"}),(0,t.jsx)("h2",{className:"text-2xl font-semibold text-muted-foreground mb-2",children:"No Apps Selected"}),(0,t.jsx)("p",{className:"text-muted-foreground",children:"Select an app from the sidebar to get started"})]})});let a=e.slice(0,(()=>{switch(s){case"single":default:return 1;case"split-h":case"split-v":return 2;case"grid-3":return 3;case"grid-4":return 4}})());return(0,t.jsx)("div",{className:"flex-1 p-4 bg-muted/20",children:(0,t.jsx)("div",{className:(0,y.cn)("h-full",(()=>{switch(s){case"single":default:return"layout-single";case"split-h":return"layout-split-h";case"split-v":return"layout-split-v";case"grid-3":return"layout-grid-3";case"grid-4":return"layout-grid-4"}})()),children:a.map((e,s)=>(0,t.jsx)(W,{app:e},`${e.id}-${s}`))})})}var B=a(7416),G=a(3807),Y=a(8959),H=a(1473),q=a(3468),J=a(9291);function K({layout:e,onLayoutChange:s,selectedApps:a}){let r=[{value:"single",label:"Single View",icon:(0,t.jsx)(B.Z,{className:"w-4 h-4"})},{value:"split-h",label:"Split Horizontal",icon:(0,t.jsx)(G.Z,{className:"w-4 h-4"})},{value:"split-v",label:"Split Vertical",icon:(0,t.jsx)(Y.Z,{className:"w-4 h-4"})},{value:"grid-3",label:"3-App Grid",icon:(0,t.jsx)(H.Z,{className:"w-4 h-4"})},{value:"grid-4",label:"4-App Grid",icon:(0,t.jsx)(q.Z,{className:"w-4 h-4"})}];return(0,t.jsx)("div",{className:"h-14 border-b border-border bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/60",children:(0,t.jsxs)("div",{className:"flex items-center justify-between h-full px-4",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(e=>{switch(e){case"single":return(0,t.jsx)(B.Z,{className:"w-4 h-4"});case"split-h":return(0,t.jsx)(G.Z,{className:"w-4 h-4"});case"split-v":return(0,t.jsx)(Y.Z,{className:"w-4 h-4"});case"grid-3":return(0,t.jsx)(H.Z,{className:"w-4 h-4"});case"grid-4":return(0,t.jsx)(q.Z,{className:"w-4 h-4"});default:return(0,t.jsx)(J.Z,{className:"w-4 h-4"})}})(e),(0,t.jsx)("span",{className:"text-sm font-medium",children:a.length>0?`${a.length} app${a.length>1?"s":""} active`:"No apps selected"})]}),a.length>0&&(0,t.jsxs)("div",{className:"flex items-center space-x-2 text-sm text-muted-foreground",children:[(0,t.jsx)("span",{children:"•"}),(0,t.jsx)("span",{children:a.map(e=>e.name).join(", ")})]})]}),(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsxs)(v,{value:e,onValueChange:s,children:[(0,t.jsx)(C,{className:"w-48",children:(0,t.jsx)(w,{})}),(0,t.jsx)(D,{children:r.map(e=>(0,t.jsx)(Z,{value:e.value,children:(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[e.icon,(0,t.jsx)("span",{children:e.label})]})},e.value))})]}),(0,t.jsxs)(i.z,{variant:"outline",size:"sm",onClick:()=>window.location.reload(),children:[(0,t.jsx)(V.Z,{className:"w-4 h-4 mr-2"}),"Refresh All"]})]})]})})}function Q(){let{data:e}=(0,n.useSession)(),[s,a]=(0,r.useState)([]),[i,l]=(0,r.useState)([]),[c,o]=(0,r.useState)("single"),[d,m]=(0,r.useState)(!0);(0,r.useEffect)(()=>{u()},[]);let u=async()=>{try{let e=await fetch("/api/apps");if(e.ok){let s=await e.json();a(s),s.length>0&&l([s[0]])}}catch(e){S.Am.error("Failed to fetch apps")}finally{m(!1)}};return d?(0,t.jsx)("div",{className:"h-screen flex items-center justify-center",children:(0,t.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})}):(0,t.jsxs)("div",{className:"h-screen flex bg-background",children:[(0,t.jsx)(I,{apps:s,selectedApps:i,onAppSelect:e=>{if("single"===c)l([e]);else{let s="split-h"===c||"split-v"===c?2:"grid-3"===c?3:4;i.find(s=>s.id===e.id)?l(i.filter(s=>s.id!==e.id)):i.length<s?l([...i,e]):l([...i.slice(1),e])}},onAppsChange:a}),(0,t.jsxs)("div",{className:"flex-1 flex flex-col",children:[(0,t.jsx)(K,{layout:c,onLayoutChange:e=>{o(e);let s="single"===e?1:"split-h"===e||"split-v"===e?2:"grid-3"===e?3:4;i.length>s&&l(i.slice(0,s))},selectedApps:i}),(0,t.jsx)(M,{selectedApps:i,layout:c})]})]})}},36:function(e,s,a){a.d(s,{g:function(){return n}});var t=a(7437),r=a(2265);function n({src:e,title:s,embedMethod:a="proxy",fallbackUrl:n,proxyAvailable:i=!0,className:l="",onLoad:c,onError:o}){let[d,m]=(0,r.useState)("loaded"),[u,x]=(0,r.useState)(""),[p,h]=(0,r.useState)([]);return((0,r.useEffect)(()=>{if(console.log("SmartIframe: Setting up for",e),"proxy"===a&&i){let s=`/api/proxy?url=${encodeURIComponent(e)}`;console.log("SmartIframe: Using proxy method",s),x(s),h(["proxy"])}else console.log("SmartIframe: Using direct method",e),x(e),h(["direct"]);m("loaded"),c?.()},[e,a,i,c]),"loading"===d)?(0,t.jsx)("div",{className:"flex items-center justify-center h-full",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary mx-auto mb-2"}),(0,t.jsxs)("p",{className:"text-sm text-muted-foreground",children:["Loading ",s,"..."]})]})}):"error"===d?(0,t.jsx)("div",{className:"h-full flex items-center justify-center",children:(0,t.jsxs)("div",{className:"text-center p-4",children:[(0,t.jsxs)("h3",{className:"font-medium mb-2",children:["Unable to embed ",s]}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground mb-4",children:"Failed to load the website content."}),(0,t.jsxs)("div",{className:"space-x-2",children:[!p.includes("proxy")&&(0,t.jsx)("button",{className:"px-3 py-1 bg-secondary text-secondary-foreground rounded text-sm hover:bg-secondary/90",onClick:()=>{x(`/api/proxy?url=${encodeURIComponent(e)}`),h([...p,"proxy"])},children:"Try Proxy Method"}),!p.includes("direct")&&(0,t.jsx)("button",{className:"px-3 py-1 bg-secondary text-secondary-foreground rounded text-sm hover:bg-secondary/90",onClick:()=>{x(e),h([...p,"direct"])},children:"Try Direct Method"}),(0,t.jsx)("button",{className:"px-3 py-1 bg-primary text-primary-foreground rounded text-sm hover:bg-primary/90",onClick:()=>{window.open(n||e,"_blank","noopener,noreferrer")},children:"Open in New Tab"})]})]})}):(console.log("SmartIframe: Rendering iframe with src:",u),(0,t.jsx)("div",{className:`iframe-container ${l}`,style:{width:"100%",height:"100%"},children:(0,t.jsx)("iframe",{src:u,title:s,style:{width:"100%",height:"100%",border:"none"},sandbox:"allow-scripts allow-same-origin allow-forms allow-popups allow-popups-to-escape-sandbox allow-presentation",onLoad:()=>{console.log("ProxyIframe: Loaded successfully:",u),c?.()},onError:()=>{console.log("ProxyIframe: Error loading:",u),m("error"),o?.()}})}))}},2869:function(e,s,a){a.d(s,{z:function(){return o}});var t=a(7437),r=a(2265),n=a(7053),i=a(7712),l=a(4508);let c=(0,i.j)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),o=r.forwardRef(({className:e,variant:s,size:a,asChild:r=!1,...i},o)=>{let d=r?n.g7:"button";return(0,t.jsx)(d,{className:(0,l.cn)(c({variant:s,size:a,className:e})),ref:o,...i})});o.displayName="Button"},6110:function(e,s,a){a.d(s,{$N:function(){return h},Be:function(){return f},Vq:function(){return c},cN:function(){return p},cZ:function(){return u},fK:function(){return x},hg:function(){return o}});var t=a(7437),r=a(2265),n=a(9027),i=a(2489),l=a(4508);let c=n.fC,o=n.xz,d=n.h_;n.x8;let m=r.forwardRef(({className:e,...s},a)=>(0,t.jsx)(n.aV,{ref:a,className:(0,l.cn)("fixed inset-0 z-50 bg-background/80 backdrop-blur-sm data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...s}));m.displayName=n.aV.displayName;let u=r.forwardRef(({className:e,children:s,...a},r)=>(0,t.jsxs)(d,{children:[(0,t.jsx)(m,{}),(0,t.jsxs)(n.VY,{ref:r,className:(0,l.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...a,children:[s,(0,t.jsxs)(n.x8,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,t.jsx)(i.Z,{className:"h-4 w-4"}),(0,t.jsx)("span",{className:"sr-only",children:"Close"})]})]})]}));u.displayName=n.VY.displayName;let x=({className:e,...s})=>(0,t.jsx)("div",{className:(0,l.cn)("flex flex-col space-y-1.5 text-center sm:text-left",e),...s});x.displayName="DialogHeader";let p=({className:e,...s})=>(0,t.jsx)("div",{className:(0,l.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",e),...s});p.displayName="DialogFooter";let h=r.forwardRef(({className:e,...s},a)=>(0,t.jsx)(n.Dx,{ref:a,className:(0,l.cn)("text-lg font-semibold leading-none tracking-tight",e),...s}));h.displayName=n.Dx.displayName;let f=r.forwardRef(({className:e,...s},a)=>(0,t.jsx)(n.dk,{ref:a,className:(0,l.cn)("text-sm text-muted-foreground",e),...s}));f.displayName=n.dk.displayName},5186:function(e,s,a){a.d(s,{I:function(){return i}});var t=a(7437),r=a(2265),n=a(4508);let i=r.forwardRef(({className:e,type:s,...a},r)=>(0,t.jsx)("input",{type:s,className:(0,n.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:r,...a}));i.displayName="Input"},6815:function(e,s,a){a.d(s,{_:function(){return o}});var t=a(7437),r=a(2265),n=a(6394),i=a(7712),l=a(4508);let c=(0,i.j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),o=r.forwardRef(({className:e,...s},a)=>(0,t.jsx)(n.f,{ref:a,className:(0,l.cn)(c(),e),...s}));o.displayName=n.f.displayName},4508:function(e,s,a){a.d(s,{cn:function(){return n}});var t=a(1994),r=a(3335);function n(...e){return(0,r.m6)((0,t.W)(e))}}}]);